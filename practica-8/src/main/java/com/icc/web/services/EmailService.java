package com.icc.web.services;

import com.icc.web.model.Event;
import com.icc.web.model.UserInfo;
import com.resend.*;
import com.resend.core.exception.ResendException;
import com.resend.services.emails.model.CreateEmailOptions;
import com.resend.services.emails.model.CreateEmailResponse;
import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Service;

@Service
@Slf4j
public class EmailService {

    private final Resend resend;

    public EmailService() {
        this.resend = new Resend("re_aHz6V5ca_HAMsYKj1cB7mDASSCiAmFJJ2");
    }

    public void sendEventConfirmationEmail(Event event) {
        UserInfo user = event.getUser();

        String htmlContent = buildHtml(event, user);

        CreateEmailOptions params =
                CreateEmailOptions.builder()
                        .from("events@chronoguard.vladimircuriel.com")
                        .to(user.getEmail())
                        .subject("Event Confirmation: " + event.getTitle())
                        .html(htmlContent)
                        .build();

        try {
            CreateEmailResponse response = resend.emails().send(params);
            log.info("Email sent successfully: {}", response.getId());
        } catch (ResendException e) {
            e.printStackTrace();
        }
    }

    public void sendEventReminderEmail(Event event) {
        UserInfo user = event.getUser();

        String htmlContent =
                """
          <div style="background-color: #ffffff; text-align: center; font-family: Arial, sans-serif; padding: 20px;">
              <div>
                  <svg width="438" height="165" viewBox="0 0 838 365" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M215 60C215 58.3431 213.657 57 212 57H121C119.343 57 118 58.3431 118 60V72C118 76.9706 113.971 81 109 81H79C74.0294 81 70 76.9706 70 72V60C70 58.3431 68.6569 57 67 57H54C37.4315 57 24 70.4315 24 87V293C24 316.748 43.2518 336 67 336H267C290.748 336 310 316.748 310 293V87C310 70.4315 296.569 57 280 57H266C264.343 57 263 58.3431 263 60V72C263 76.9706 258.971 81 254 81H224C219.029 81 215 76.9706 215 72V60ZM282 112H231.693C214.421 96.458 191.564 87 166.5 87C141.436 87 118.579 96.458 101.307 112H52C49.2383 112 47 114.239 47 117V278C47 292.912 59.0879 305 74 305H260C274.912 305 287 292.912 287 278V117C287 114.239 284.762 112 282 112Z" fill="#00a968"/>
                    <path d="M77 37C77 32.0294 81.0294 28 86 28H102C106.971 28 111 32.0294 111 37V69C111 72.3137 108.314 75 105 75H83C79.6863 75 77 72.3137 77 69V37Z" fill="#00a968"/>
                    <path d="M222 37C222 32.0294 226.029 28 231 28H247C251.971 28 256 32.0294 256 37V69C256 72.3137 253.314 75 250 75H228C224.686 75 222 72.3137 222 69V37Z" fill="#00a968"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M83.9848 180.629C82.7699 180.629 81.8344 179.551 82.0346 178.353C88.2289 141.277 118.144 112.233 155.649 107.352C156.826 107.199 157.856 108.126 157.856 109.313V116.129C157.856 120.271 161.213 123.629 165.356 123.629C169.498 123.629 172.856 120.271 172.856 116.129V108.977C172.856 107.818 173.842 106.901 174.996 107.009C213.928 110.664 245.315 140.272 251.677 178.353C251.877 179.551 250.942 180.629 249.727 180.629H242.356C238.213 180.629 234.856 183.986 234.856 188.129C234.856 192.271 238.213 195.629 242.356 195.629H250.735C251.866 195.629 252.774 196.569 252.708 197.699C250.805 230.438 230.587 258.262 202.15 271.076C200.197 271.956 198.534 273.373 197.329 275.143C187.854 289.066 175.035 296.746 166.35 299.548C157.549 296.708 144.501 288.855 134.994 274.571C133.821 272.809 132.197 271.387 130.282 270.486C102.518 257.422 82.8773 229.945 81.0033 197.699C80.9379 196.569 81.8461 195.629 82.977 195.629H91.3559C95.4984 195.629 98.8559 192.271 98.8559 188.129C98.8559 183.986 95.4984 180.629 91.3559 180.629H83.9848ZM166.346 210.629C180.067 217.256 195.155 221.239 201.396 222.492C205.559 263.402 179.838 282.193 166.346 286.548C152.858 282.193 127.143 263.403 131.306 222.492C137.545 221.239 152.629 217.255 166.346 210.629ZM208.39 142.578C211.455 139.792 216.199 140.019 218.985 143.085C221.771 146.15 221.543 150.893 218.478 153.679L177.784 190.66C177.623 197.147 172.314 202.357 165.788 202.357C159.743 202.357 154.742 197.887 153.91 192.072L129.579 171.969C126.386 169.33 125.936 164.603 128.575 161.41C131.213 158.217 135.94 157.767 139.133 160.405L161.717 179.065C162.112 178.923 162.515 178.801 162.927 178.701C163.225 178.628 163.528 178.566 163.834 178.516C164.264 178.445 164.703 178.398 165.147 178.374C165.359 178.363 165.573 178.357 165.788 178.357C166.51 178.357 167.217 178.421 167.905 178.543C168.153 178.588 168.399 178.639 168.642 178.699L208.39 142.578Z" fill="#00a968"/>
                    <path d="M397.035 187.74C387.225 187.74 378.855 185.76 371.925 181.8C365.085 177.75 359.865 172.08 356.265 164.79C352.755 157.5 351 148.995 351 139.275C351 129.375 352.8 120.735 356.4 113.355C360.09 105.975 365.355 100.26 372.195 96.21C379.035 92.07 387.27 90 396.9 90C404.19 90 410.715 91.26 416.475 93.78C422.235 96.21 426.87 99.855 430.38 104.715C433.98 109.485 436.23 115.38 437.13 122.4H418.5C417.33 117.99 414.945 114.525 411.345 112.005C407.835 109.395 403.155 108.09 397.305 108.09C390.825 108.09 385.65 109.575 381.78 112.545C378 115.425 375.255 119.205 373.545 123.885C371.835 128.475 370.98 133.335 370.98 138.465C370.98 143.775 371.88 148.815 373.68 153.585C375.48 158.355 378.315 162.225 382.185 165.195C386.145 168.165 391.32 169.65 397.71 169.65C401.49 169.65 404.865 169.11 407.835 168.03C410.805 166.86 413.235 165.195 415.125 163.035C417.105 160.875 418.455 158.31 419.175 155.34H438.48C437.67 162.27 435.33 168.165 431.46 173.025C427.59 177.885 422.685 181.575 416.745 184.095C410.805 186.525 404.235 187.74 397.035 187.74Z" fill="#00a968"/>
                    <path d="M449.937 186.66V91.08H468.837V123.75C470.907 121.32 473.202 119.43 475.722 118.08C478.332 116.73 480.942 115.785 483.552 115.245C486.252 114.615 488.727 114.3 490.977 114.3C497.637 114.3 502.857 115.785 506.637 118.755C510.417 121.725 513.117 125.73 514.737 130.77C516.357 135.81 517.167 141.345 517.167 147.375V186.66H498.267V150.075C498.267 147.915 498.042 145.755 497.592 143.595C497.232 141.435 496.557 139.455 495.567 137.655C494.577 135.765 493.182 134.28 491.382 133.2C489.582 132.03 487.197 131.445 484.227 131.445C481.437 131.445 479.052 132.03 477.072 133.2C475.092 134.37 473.472 135.945 472.212 137.925C471.042 139.815 470.187 141.93 469.647 144.27C469.107 146.61 468.837 148.95 468.837 151.29V186.66H449.937Z" fill="#00a968"/>
                    <path d="M531.675 186.66V115.515H548.685L549.9 124.02C551.7 121.32 553.725 119.295 555.975 117.945C558.225 116.505 560.565 115.56 562.995 115.11C565.425 114.57 567.9 114.3 570.42 114.3C571.59 114.3 572.67 114.345 573.66 114.435C574.65 114.435 575.37 114.435 575.82 114.435V132.66H571.365C567.135 132.66 563.445 133.38 560.295 134.82C557.145 136.26 554.715 138.51 553.005 141.57C551.385 144.63 550.575 148.545 550.575 153.315V186.66H531.675Z" fill="#00a968"/>
                    <path d="M616.565 187.605C609.365 187.605 603.065 186.165 597.665 183.285C592.265 180.315 588.08 176.13 585.11 170.73C582.14 165.24 580.655 158.76 580.655 151.29C580.655 143.64 582.14 137.07 585.11 131.58C588.17 126 592.4 121.725 597.8 118.755C603.2 115.785 609.41 114.3 616.43 114.3C623.63 114.3 629.885 115.83 635.195 118.89C640.505 121.95 644.645 126.225 647.615 131.715C650.585 137.205 652.07 143.775 652.07 151.425C652.07 158.895 650.585 165.375 647.615 170.865C644.735 176.265 640.64 180.405 635.33 183.285C630.11 186.165 623.855 187.605 616.565 187.605ZM616.295 170.325C620.435 170.325 623.765 169.425 626.285 167.625C628.805 165.825 630.605 163.485 631.685 160.605C632.855 157.635 633.44 154.53 633.44 151.29C633.44 148.05 632.855 144.945 631.685 141.975C630.605 139.005 628.805 136.575 626.285 134.685C623.855 132.705 620.525 131.715 616.295 131.715C612.245 131.715 608.96 132.705 606.44 134.685C603.92 136.575 602.075 139.005 600.905 141.975C599.825 144.945 599.285 148.05 599.285 151.29C599.285 154.62 599.825 157.725 600.905 160.605C602.075 163.485 603.92 165.825 606.44 167.625C608.96 169.425 612.245 170.325 616.295 170.325Z" fill="#00a968"/>
                    <path d="M664.17 186.66V115.515H681.855L682.8 123.75C684.78 121.32 687.03 119.43 689.55 118.08C692.16 116.64 694.77 115.65 697.38 115.11C700.08 114.57 702.51 114.3 704.67 114.3C711.51 114.3 716.82 115.785 720.6 118.755C724.47 121.725 727.215 125.73 728.835 130.77C730.545 135.72 731.401 141.255 731.401 147.375V186.66H712.5V149.805C712.5 147.645 712.32 145.485 711.96 143.325C711.6 141.165 710.925 139.185 709.935 137.385C709.035 135.585 707.731 134.145 706.021 133.065C704.311 131.985 702.061 131.445 699.271 131.445C695.671 131.445 692.655 132.345 690.225 134.145C687.795 135.945 685.995 138.375 684.825 141.435C683.655 144.495 683.07 147.87 683.07 151.56V186.66H664.17Z" fill="#00a968"/>
                    <path d="M779.119 187.605C771.919 187.605 765.619 186.165 760.219 183.285C754.819 180.315 750.634 176.13 747.664 170.73C744.694 165.24 743.209 158.76 743.209 151.29C743.209 143.64 744.694 137.07 747.664 131.58C750.724 126 754.954 121.725 760.354 118.755C765.754 115.785 771.964 114.3 778.984 114.3C786.184 114.3 792.439 115.83 797.749 118.89C803.059 121.95 807.199 126.225 810.169 131.715C813.139 137.205 814.624 143.775 814.624 151.425C814.624 158.895 813.139 165.375 810.169 170.865C807.289 176.265 803.194 180.405 797.884 183.285C792.664 186.165 786.409 187.605 779.119 187.605ZM778.849 170.325C782.989 170.325 786.319 169.425 788.839 167.625C791.359 165.825 793.159 163.485 794.239 160.605C795.409 157.635 795.994 154.53 795.994 151.29C795.994 148.05 795.409 144.945 794.239 141.975C793.159 139.005 791.359 136.575 788.839 134.685C786.409 132.705 783.079 131.715 778.849 131.715C774.799 131.715 771.514 132.705 768.994 134.685C766.474 136.575 764.629 139.005 763.459 141.975C762.379 144.945 761.839 148.05 761.839 151.29C761.839 154.62 762.379 157.725 763.459 160.605C764.629 163.485 766.474 165.825 768.994 167.625C771.514 169.425 774.799 170.325 778.849 170.325Z" fill="#00a968"/>
                    <path d="M396.9 308.74C387.18 308.74 378.9 306.715 372.06 302.665C365.22 298.525 360 292.81 356.4 285.52C352.8 278.14 351 269.545 351 259.735C351 252.445 351.99 245.83 353.97 239.89C356.04 233.86 359.01 228.685 362.88 224.365C366.84 220.045 371.655 216.76 377.325 214.51C382.995 212.17 389.43 211 396.63 211C403.92 211 410.445 212.17 416.205 214.51C421.965 216.85 426.735 220.36 430.515 225.04C434.385 229.63 436.905 235.39 438.075 242.32H418.5C417.78 239.35 416.475 236.92 414.585 235.03C412.695 233.05 410.31 231.565 407.43 230.575C404.64 229.585 401.445 229.09 397.845 229.09C392.895 229.09 388.71 229.945 385.29 231.655C381.87 233.365 379.08 235.705 376.92 238.675C374.85 241.555 373.32 244.885 372.33 248.665C371.43 252.355 370.98 256.18 370.98 260.14C370.98 265.54 371.88 270.58 373.68 275.26C375.48 279.85 378.315 283.585 382.185 286.465C386.055 289.255 391.185 290.65 397.575 290.65C401.805 290.65 405.54 290.02 408.78 288.76C412.11 287.41 414.765 285.43 416.745 282.82C418.815 280.12 419.985 276.88 420.255 273.1H394.2V256.495H440.1V261.76C440.1 271.48 438.48 279.85 435.24 286.87C432 293.89 427.185 299.29 420.795 303.07C414.405 306.85 406.44 308.74 396.9 308.74Z" fill="#00a968"/>
                    <path d="M484.707 308.605C474.267 308.605 466.212 305.95 460.542 300.64C454.962 295.24 452.172 287.14 452.172 276.34V236.515H471.072V274.99C471.072 278.23 471.522 281.11 472.422 283.63C473.412 286.06 474.897 287.995 476.877 289.435C478.947 290.875 481.602 291.595 484.842 291.595C488.352 291.595 491.052 290.83 492.942 289.3C494.832 287.77 496.137 285.745 496.857 283.225C497.577 280.615 497.937 277.87 497.937 274.99V236.515H516.702V276.34C516.702 287.59 513.867 295.78 508.197 300.91C502.617 306.04 494.787 308.605 484.707 308.605Z" fill="#00a968"/>
                    <path d="M553.957 308.605C550.717 308.605 547.567 308.2 544.507 307.39C541.537 306.49 538.882 305.14 536.542 303.34C534.202 301.54 532.357 299.29 531.007 296.59C529.657 293.89 528.982 290.74 528.982 287.14C528.982 282.28 529.972 278.41 531.952 275.53C533.932 272.56 536.587 270.31 539.917 268.78C543.247 267.25 547.072 266.215 551.392 265.675C555.802 265.135 560.347 264.865 565.027 264.865H575.287C575.287 262.255 574.792 259.96 573.802 257.98C572.902 255.91 571.507 254.335 569.617 253.255C567.727 252.085 565.297 251.5 562.327 251.5C560.437 251.5 558.592 251.77 556.792 252.31C555.082 252.76 553.642 253.435 552.472 254.335C551.302 255.235 550.537 256.405 550.177 257.845H531.007C531.547 253.885 532.807 250.51 534.787 247.72C536.767 244.84 539.242 242.5 542.212 240.7C545.182 238.9 548.422 237.595 551.932 236.785C555.532 235.885 559.222 235.435 563.002 235.435C573.352 235.435 581.002 238.405 585.952 244.345C590.902 250.195 593.377 258.52 593.377 269.32V307.66H576.367L576.097 298.48C573.847 301.63 571.282 303.925 568.402 305.365C565.612 306.805 562.912 307.705 560.302 308.065C557.692 308.425 555.577 308.605 553.957 308.605ZM558.277 293.62C561.427 293.62 564.307 292.99 566.917 291.73C569.527 290.47 571.597 288.76 573.127 286.6C574.657 284.44 575.422 282.01 575.422 279.31V277.555H562.462C560.572 277.555 558.727 277.645 556.927 277.825C555.217 278.005 553.642 278.365 552.202 278.905C550.852 279.355 549.772 280.12 548.962 281.2C548.152 282.28 547.747 283.72 547.747 285.52C547.747 287.32 548.197 288.85 549.097 290.11C550.087 291.28 551.392 292.18 553.012 292.81C554.632 293.35 556.387 293.62 558.277 293.62Z" fill="#00a968"/>
                    <path d="M608.14 307.66V236.515H625.15L626.365 245.02C628.165 242.32 630.19 240.295 632.44 238.945C634.69 237.505 637.03 236.56 639.46 236.11C641.89 235.57 644.365 235.3 646.885 235.3C648.055 235.3 649.135 235.345 650.125 235.435C651.115 235.435 651.835 235.435 652.285 235.435V253.66H647.83C643.6 253.66 639.91 254.38 636.76 255.82C633.61 257.26 631.18 259.51 629.47 262.57C627.85 265.63 627.04 269.545 627.04 274.315V307.66H608.14Z" fill="#00a968"/>
                    <path d="M689.115 308.605C681.915 308.605 675.93 306.985 671.16 303.745C666.48 300.415 662.97 296.005 660.63 290.515C658.29 284.935 657.12 278.77 657.12 272.02C657.12 264.91 658.38 258.61 660.9 253.12C663.42 247.54 667.155 243.175 672.105 240.025C677.055 236.875 683.22 235.3 690.6 235.3C693.12 235.3 695.595 235.615 698.025 236.245C700.545 236.785 702.84 237.64 704.91 238.81C707.07 239.89 708.915 241.33 710.445 243.13V212.08H729.345V307.66H710.985L710.715 299.695C709.095 301.765 707.115 303.475 704.775 304.825C702.525 306.085 700.095 307.03 697.485 307.66C694.875 308.29 692.085 308.605 689.115 308.605ZM692.895 291.595C696.945 291.595 700.23 290.65 702.75 288.76C705.36 286.87 707.295 284.44 708.555 281.47C709.815 278.5 710.445 275.305 710.445 271.885C710.445 268.375 709.815 265.18 708.555 262.3C707.385 259.33 705.495 256.99 702.885 255.28C700.365 253.48 697.035 252.58 692.895 252.58C688.755 252.58 685.425 253.525 682.905 255.415C680.385 257.305 678.585 259.78 677.505 262.84C676.515 265.81 676.02 269.005 676.02 272.425C676.02 274.945 676.29 277.375 676.83 279.715C677.46 281.965 678.45 283.99 679.8 285.79C681.15 287.59 682.905 289.03 685.065 290.11C687.225 291.1 689.835 291.595 692.895 291.595Z" fill="#00a968"/>
                  </svg>
              </div>
              <h2 style="color: #00a968;">Hello %s,</h2>
              <p style="font-size: 16px; max-width: 600px; margin: 0 auto;">
                  This is a friendly reminder that your event <strong>%s</strong><br/>
                  Description: %s<br/>
                  Starts at <strong>%s</strong> and ends at <strong>%s</strong>.
              </p>
              <div style="margin-top: 40px; padding: 10px; background-color: #00a968; color: #ffffff;">
                  <p style="margin: 0;">ChronoGuard is here to keep you on time.</p>
              </div>
          </div>
          """
                        .formatted(
                                user.getName(),
                                event.getTitle(),
                                event.getDescription(),
                                event.getStartDateTime(),
                                event.getEndDateTime());

        CreateEmailOptions params =
                CreateEmailOptions.builder()
                        .from("reminders@chronoguard.vladimircuriel.com")
                        .to(user.getEmail())
                        .subject("⏰ Reminder: Upcoming Event - " + event.getTitle())
                        .html(htmlContent)
                        .build();

        try {
            CreateEmailResponse response = resend.emails().send(params);
            log.info("Reminder email sent: {}", response.getId());
        } catch (ResendException e) {
            log.error("Failed to send reminder", e);
        }
    }

    private String buildHtml(Event event, UserInfo user) {
        return """
            <div style="background-color: #ffffff; text-align: center; font-family: Arial, sans-serif; padding: 20px;">
                <div>
                    <svg width="438" height="165" viewBox="0 0 838 365" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd" clip-rule="evenodd" d="M215 60C215 58.3431 213.657 57 212 57H121C119.343 57 118 58.3431 118 60V72C118 76.9706 113.971 81 109 81H79C74.0294 81 70 76.9706 70 72V60C70 58.3431 68.6569 57 67 57H54C37.4315 57 24 70.4315 24 87V293C24 316.748 43.2518 336 67 336H267C290.748 336 310 316.748 310 293V87C310 70.4315 296.569 57 280 57H266C264.343 57 263 58.3431 263 60V72C263 76.9706 258.971 81 254 81H224C219.029 81 215 76.9706 215 72V60ZM282 112H231.693C214.421 96.458 191.564 87 166.5 87C141.436 87 118.579 96.458 101.307 112H52C49.2383 112 47 114.239 47 117V278C47 292.912 59.0879 305 74 305H260C274.912 305 287 292.912 287 278V117C287 114.239 284.762 112 282 112Z" fill="#00a968"/>
                      <path d="M77 37C77 32.0294 81.0294 28 86 28H102C106.971 28 111 32.0294 111 37V69C111 72.3137 108.314 75 105 75H83C79.6863 75 77 72.3137 77 69V37Z" fill="#00a968"/>
                      <path d="M222 37C222 32.0294 226.029 28 231 28H247C251.971 28 256 32.0294 256 37V69C256 72.3137 253.314 75 250 75H228C224.686 75 222 72.3137 222 69V37Z" fill="#00a968"/>
                      <path fill-rule="evenodd" clip-rule="evenodd" d="M83.9848 180.629C82.7699 180.629 81.8344 179.551 82.0346 178.353C88.2289 141.277 118.144 112.233 155.649 107.352C156.826 107.199 157.856 108.126 157.856 109.313V116.129C157.856 120.271 161.213 123.629 165.356 123.629C169.498 123.629 172.856 120.271 172.856 116.129V108.977C172.856 107.818 173.842 106.901 174.996 107.009C213.928 110.664 245.315 140.272 251.677 178.353C251.877 179.551 250.942 180.629 249.727 180.629H242.356C238.213 180.629 234.856 183.986 234.856 188.129C234.856 192.271 238.213 195.629 242.356 195.629H250.735C251.866 195.629 252.774 196.569 252.708 197.699C250.805 230.438 230.587 258.262 202.15 271.076C200.197 271.956 198.534 273.373 197.329 275.143C187.854 289.066 175.035 296.746 166.35 299.548C157.549 296.708 144.501 288.855 134.994 274.571C133.821 272.809 132.197 271.387 130.282 270.486C102.518 257.422 82.8773 229.945 81.0033 197.699C80.9379 196.569 81.8461 195.629 82.977 195.629H91.3559C95.4984 195.629 98.8559 192.271 98.8559 188.129C98.8559 183.986 95.4984 180.629 91.3559 180.629H83.9848ZM166.346 210.629C180.067 217.256 195.155 221.239 201.396 222.492C205.559 263.402 179.838 282.193 166.346 286.548C152.858 282.193 127.143 263.403 131.306 222.492C137.545 221.239 152.629 217.255 166.346 210.629ZM208.39 142.578C211.455 139.792 216.199 140.019 218.985 143.085C221.771 146.15 221.543 150.893 218.478 153.679L177.784 190.66C177.623 197.147 172.314 202.357 165.788 202.357C159.743 202.357 154.742 197.887 153.91 192.072L129.579 171.969C126.386 169.33 125.936 164.603 128.575 161.41C131.213 158.217 135.94 157.767 139.133 160.405L161.717 179.065C162.112 178.923 162.515 178.801 162.927 178.701C163.225 178.628 163.528 178.566 163.834 178.516C164.264 178.445 164.703 178.398 165.147 178.374C165.359 178.363 165.573 178.357 165.788 178.357C166.51 178.357 167.217 178.421 167.905 178.543C168.153 178.588 168.399 178.639 168.642 178.699L208.39 142.578Z" fill="#00a968"/>
                      <path d="M397.035 187.74C387.225 187.74 378.855 185.76 371.925 181.8C365.085 177.75 359.865 172.08 356.265 164.79C352.755 157.5 351 148.995 351 139.275C351 129.375 352.8 120.735 356.4 113.355C360.09 105.975 365.355 100.26 372.195 96.21C379.035 92.07 387.27 90 396.9 90C404.19 90 410.715 91.26 416.475 93.78C422.235 96.21 426.87 99.855 430.38 104.715C433.98 109.485 436.23 115.38 437.13 122.4H418.5C417.33 117.99 414.945 114.525 411.345 112.005C407.835 109.395 403.155 108.09 397.305 108.09C390.825 108.09 385.65 109.575 381.78 112.545C378 115.425 375.255 119.205 373.545 123.885C371.835 128.475 370.98 133.335 370.98 138.465C370.98 143.775 371.88 148.815 373.68 153.585C375.48 158.355 378.315 162.225 382.185 165.195C386.145 168.165 391.32 169.65 397.71 169.65C401.49 169.65 404.865 169.11 407.835 168.03C410.805 166.86 413.235 165.195 415.125 163.035C417.105 160.875 418.455 158.31 419.175 155.34H438.48C437.67 162.27 435.33 168.165 431.46 173.025C427.59 177.885 422.685 181.575 416.745 184.095C410.805 186.525 404.235 187.74 397.035 187.74Z" fill="#00a968"/>
                      <path d="M449.937 186.66V91.08H468.837V123.75C470.907 121.32 473.202 119.43 475.722 118.08C478.332 116.73 480.942 115.785 483.552 115.245C486.252 114.615 488.727 114.3 490.977 114.3C497.637 114.3 502.857 115.785 506.637 118.755C510.417 121.725 513.117 125.73 514.737 130.77C516.357 135.81 517.167 141.345 517.167 147.375V186.66H498.267V150.075C498.267 147.915 498.042 145.755 497.592 143.595C497.232 141.435 496.557 139.455 495.567 137.655C494.577 135.765 493.182 134.28 491.382 133.2C489.582 132.03 487.197 131.445 484.227 131.445C481.437 131.445 479.052 132.03 477.072 133.2C475.092 134.37 473.472 135.945 472.212 137.925C471.042 139.815 470.187 141.93 469.647 144.27C469.107 146.61 468.837 148.95 468.837 151.29V186.66H449.937Z" fill="#00a968"/>
                      <path d="M531.675 186.66V115.515H548.685L549.9 124.02C551.7 121.32 553.725 119.295 555.975 117.945C558.225 116.505 560.565 115.56 562.995 115.11C565.425 114.57 567.9 114.3 570.42 114.3C571.59 114.3 572.67 114.345 573.66 114.435C574.65 114.435 575.37 114.435 575.82 114.435V132.66H571.365C567.135 132.66 563.445 133.38 560.295 134.82C557.145 136.26 554.715 138.51 553.005 141.57C551.385 144.63 550.575 148.545 550.575 153.315V186.66H531.675Z" fill="#00a968"/>
                      <path d="M616.565 187.605C609.365 187.605 603.065 186.165 597.665 183.285C592.265 180.315 588.08 176.13 585.11 170.73C582.14 165.24 580.655 158.76 580.655 151.29C580.655 143.64 582.14 137.07 585.11 131.58C588.17 126 592.4 121.725 597.8 118.755C603.2 115.785 609.41 114.3 616.43 114.3C623.63 114.3 629.885 115.83 635.195 118.89C640.505 121.95 644.645 126.225 647.615 131.715C650.585 137.205 652.07 143.775 652.07 151.425C652.07 158.895 650.585 165.375 647.615 170.865C644.735 176.265 640.64 180.405 635.33 183.285C630.11 186.165 623.855 187.605 616.565 187.605ZM616.295 170.325C620.435 170.325 623.765 169.425 626.285 167.625C628.805 165.825 630.605 163.485 631.685 160.605C632.855 157.635 633.44 154.53 633.44 151.29C633.44 148.05 632.855 144.945 631.685 141.975C630.605 139.005 628.805 136.575 626.285 134.685C623.855 132.705 620.525 131.715 616.295 131.715C612.245 131.715 608.96 132.705 606.44 134.685C603.92 136.575 602.075 139.005 600.905 141.975C599.825 144.945 599.285 148.05 599.285 151.29C599.285 154.62 599.825 157.725 600.905 160.605C602.075 163.485 603.92 165.825 606.44 167.625C608.96 169.425 612.245 170.325 616.295 170.325Z" fill="#00a968"/>
                      <path d="M664.17 186.66V115.515H681.855L682.8 123.75C684.78 121.32 687.03 119.43 689.55 118.08C692.16 116.64 694.77 115.65 697.38 115.11C700.08 114.57 702.51 114.3 704.67 114.3C711.51 114.3 716.82 115.785 720.6 118.755C724.47 121.725 727.215 125.73 728.835 130.77C730.545 135.72 731.401 141.255 731.401 147.375V186.66H712.5V149.805C712.5 147.645 712.32 145.485 711.96 143.325C711.6 141.165 710.925 139.185 709.935 137.385C709.035 135.585 707.731 134.145 706.021 133.065C704.311 131.985 702.061 131.445 699.271 131.445C695.671 131.445 692.655 132.345 690.225 134.145C687.795 135.945 685.995 138.375 684.825 141.435C683.655 144.495 683.07 147.87 683.07 151.56V186.66H664.17Z" fill="#00a968"/>
                      <path d="M779.119 187.605C771.919 187.605 765.619 186.165 760.219 183.285C754.819 180.315 750.634 176.13 747.664 170.73C744.694 165.24 743.209 158.76 743.209 151.29C743.209 143.64 744.694 137.07 747.664 131.58C750.724 126 754.954 121.725 760.354 118.755C765.754 115.785 771.964 114.3 778.984 114.3C786.184 114.3 792.439 115.83 797.749 118.89C803.059 121.95 807.199 126.225 810.169 131.715C813.139 137.205 814.624 143.775 814.624 151.425C814.624 158.895 813.139 165.375 810.169 170.865C807.289 176.265 803.194 180.405 797.884 183.285C792.664 186.165 786.409 187.605 779.119 187.605ZM778.849 170.325C782.989 170.325 786.319 169.425 788.839 167.625C791.359 165.825 793.159 163.485 794.239 160.605C795.409 157.635 795.994 154.53 795.994 151.29C795.994 148.05 795.409 144.945 794.239 141.975C793.159 139.005 791.359 136.575 788.839 134.685C786.409 132.705 783.079 131.715 778.849 131.715C774.799 131.715 771.514 132.705 768.994 134.685C766.474 136.575 764.629 139.005 763.459 141.975C762.379 144.945 761.839 148.05 761.839 151.29C761.839 154.62 762.379 157.725 763.459 160.605C764.629 163.485 766.474 165.825 768.994 167.625C771.514 169.425 774.799 170.325 778.849 170.325Z" fill="#00a968"/>
                      <path d="M396.9 308.74C387.18 308.74 378.9 306.715 372.06 302.665C365.22 298.525 360 292.81 356.4 285.52C352.8 278.14 351 269.545 351 259.735C351 252.445 351.99 245.83 353.97 239.89C356.04 233.86 359.01 228.685 362.88 224.365C366.84 220.045 371.655 216.76 377.325 214.51C382.995 212.17 389.43 211 396.63 211C403.92 211 410.445 212.17 416.205 214.51C421.965 216.85 426.735 220.36 430.515 225.04C434.385 229.63 436.905 235.39 438.075 242.32H418.5C417.78 239.35 416.475 236.92 414.585 235.03C412.695 233.05 410.31 231.565 407.43 230.575C404.64 229.585 401.445 229.09 397.845 229.09C392.895 229.09 388.71 229.945 385.29 231.655C381.87 233.365 379.08 235.705 376.92 238.675C374.85 241.555 373.32 244.885 372.33 248.665C371.43 252.355 370.98 256.18 370.98 260.14C370.98 265.54 371.88 270.58 373.68 275.26C375.48 279.85 378.315 283.585 382.185 286.465C386.055 289.255 391.185 290.65 397.575 290.65C401.805 290.65 405.54 290.02 408.78 288.76C412.11 287.41 414.765 285.43 416.745 282.82C418.815 280.12 419.985 276.88 420.255 273.1H394.2V256.495H440.1V261.76C440.1 271.48 438.48 279.85 435.24 286.87C432 293.89 427.185 299.29 420.795 303.07C414.405 306.85 406.44 308.74 396.9 308.74Z" fill="#00a968"/>
                      <path d="M484.707 308.605C474.267 308.605 466.212 305.95 460.542 300.64C454.962 295.24 452.172 287.14 452.172 276.34V236.515H471.072V274.99C471.072 278.23 471.522 281.11 472.422 283.63C473.412 286.06 474.897 287.995 476.877 289.435C478.947 290.875 481.602 291.595 484.842 291.595C488.352 291.595 491.052 290.83 492.942 289.3C494.832 287.77 496.137 285.745 496.857 283.225C497.577 280.615 497.937 277.87 497.937 274.99V236.515H516.702V276.34C516.702 287.59 513.867 295.78 508.197 300.91C502.617 306.04 494.787 308.605 484.707 308.605Z" fill="#00a968"/>
                      <path d="M553.957 308.605C550.717 308.605 547.567 308.2 544.507 307.39C541.537 306.49 538.882 305.14 536.542 303.34C534.202 301.54 532.357 299.29 531.007 296.59C529.657 293.89 528.982 290.74 528.982 287.14C528.982 282.28 529.972 278.41 531.952 275.53C533.932 272.56 536.587 270.31 539.917 268.78C543.247 267.25 547.072 266.215 551.392 265.675C555.802 265.135 560.347 264.865 565.027 264.865H575.287C575.287 262.255 574.792 259.96 573.802 257.98C572.902 255.91 571.507 254.335 569.617 253.255C567.727 252.085 565.297 251.5 562.327 251.5C560.437 251.5 558.592 251.77 556.792 252.31C555.082 252.76 553.642 253.435 552.472 254.335C551.302 255.235 550.537 256.405 550.177 257.845H531.007C531.547 253.885 532.807 250.51 534.787 247.72C536.767 244.84 539.242 242.5 542.212 240.7C545.182 238.9 548.422 237.595 551.932 236.785C555.532 235.885 559.222 235.435 563.002 235.435C573.352 235.435 581.002 238.405 585.952 244.345C590.902 250.195 593.377 258.52 593.377 269.32V307.66H576.367L576.097 298.48C573.847 301.63 571.282 303.925 568.402 305.365C565.612 306.805 562.912 307.705 560.302 308.065C557.692 308.425 555.577 308.605 553.957 308.605ZM558.277 293.62C561.427 293.62 564.307 292.99 566.917 291.73C569.527 290.47 571.597 288.76 573.127 286.6C574.657 284.44 575.422 282.01 575.422 279.31V277.555H562.462C560.572 277.555 558.727 277.645 556.927 277.825C555.217 278.005 553.642 278.365 552.202 278.905C550.852 279.355 549.772 280.12 548.962 281.2C548.152 282.28 547.747 283.72 547.747 285.52C547.747 287.32 548.197 288.85 549.097 290.11C550.087 291.28 551.392 292.18 553.012 292.81C554.632 293.35 556.387 293.62 558.277 293.62Z" fill="#00a968"/>
                      <path d="M608.14 307.66V236.515H625.15L626.365 245.02C628.165 242.32 630.19 240.295 632.44 238.945C634.69 237.505 637.03 236.56 639.46 236.11C641.89 235.57 644.365 235.3 646.885 235.3C648.055 235.3 649.135 235.345 650.125 235.435C651.115 235.435 651.835 235.435 652.285 235.435V253.66H647.83C643.6 253.66 639.91 254.38 636.76 255.82C633.61 257.26 631.18 259.51 629.47 262.57C627.85 265.63 627.04 269.545 627.04 274.315V307.66H608.14Z" fill="#00a968"/>
                      <path d="M689.115 308.605C681.915 308.605 675.93 306.985 671.16 303.745C666.48 300.415 662.97 296.005 660.63 290.515C658.29 284.935 657.12 278.77 657.12 272.02C657.12 264.91 658.38 258.61 660.9 253.12C663.42 247.54 667.155 243.175 672.105 240.025C677.055 236.875 683.22 235.3 690.6 235.3C693.12 235.3 695.595 235.615 698.025 236.245C700.545 236.785 702.84 237.64 704.91 238.81C707.07 239.89 708.915 241.33 710.445 243.13V212.08H729.345V307.66H710.985L710.715 299.695C709.095 301.765 707.115 303.475 704.775 304.825C702.525 306.085 700.095 307.03 697.485 307.66C694.875 308.29 692.085 308.605 689.115 308.605ZM692.895 291.595C696.945 291.595 700.23 290.65 702.75 288.76C705.36 286.87 707.295 284.44 708.555 281.47C709.815 278.5 710.445 275.305 710.445 271.885C710.445 268.375 709.815 265.18 708.555 262.3C707.385 259.33 705.495 256.99 702.885 255.28C700.365 253.48 697.035 252.58 692.895 252.58C688.755 252.58 685.425 253.525 682.905 255.415C680.385 257.305 678.585 259.78 677.505 262.84C676.515 265.81 676.02 269.005 676.02 272.425C676.02 274.945 676.29 277.375 676.83 279.715C677.46 281.965 678.45 283.99 679.8 285.79C681.15 287.59 682.905 289.03 685.065 290.11C687.225 291.1 689.835 291.595 692.895 291.595Z" fill="#00a968"/>
                    </svg>
                </div>

                <h2 style="color: #00a968;">Hello %s,</h2>
                <p style="font-size: 16px; max-width: 600px; margin: 0 auto;">
                    You scheduled event <strong>%s</strong><br/>
                    Description: %s<br/>
                    From <strong>%s</strong> to <strong>%s</strong>
                </p>

                <div style="margin-top: 40px; padding: 10px; background-color: #00a968; color: #ffffff;">
                    <p style="margin: 0;">Thank you for trusting ChronoGuard. We'll see you soon!</p>
                </div>
            </div>
            """
                .formatted(
                        user.getName(),
                        event.getTitle(),
                        event.getDescription(),
                        event.getStartDateTime(),
                        event.getEndDateTime());
    }
}
